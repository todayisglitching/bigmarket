# BigMarket - Маркетплейс на Django

Полнофункциональный маркетплейс с разделением на продавцов и клиентов, системой аутентификации и управления продуктами.

## Основные возможности

- ✅ Система регистрации и аутентификации для клиентов и продавцов
- ✅ Управление продуктами с ценами и остатками
- ✅ Система тегов для категоризации продуктов
- ✅ Модерация продуктов (поле `checked`)
- ✅ REST API для интеграции
- ✅ Веб-интерфейс для регистрации и входа
- ✅ Админ-панель Django для управления

## Быстрый старт

1. **Установите зависимости:**
   ```bash
   pip install -r requirements.txt
   ```

2. **Настройте settings.py** (см. `SETTINGS_UPDATE.md`)

3. **Создайте и примените миграции:**
   ```bash
   python manage.py makemigrations marketplace
   python manage.py migrate
   ```

4. **Создайте суперпользователя:**
   ```bash
   python manage.py createsuperuser
   ```

5. **Запустите сервер:**
   ```bash
   python manage.py runserver
   ```

## Модели данных

### Product (Продукт)
- `id` - уникальный идентификатор
- `title` - название (минимум 3 символа)
- `description` - описание (минимум 10 символов)
- `price` - цена в рублях (Decimal, минимум 0)
- `stock` - остаток на складе (Integer, минимум 0)
- `thumbnail` - миниатюра (ImageField, опционально)
- `photos` - массив URL фотографий (максимум 10)
- `seller` - продавец (ForeignKey)
- `tags` - теги (ManyToManyField)
- `checked` - проверен администратором (Boolean, по умолчанию False)
- `created_at` - дата создания
- `updated_at` - дата обновления

### Tag (Тег)
- `id` - уникальный идентификатор
- `tagtitle` - название тега (уникальное, минимум 2 символа)
- `created_at` - дата создания

### Seller (Продавец)
- `id` - уникальный идентификатор
- `email` - email (уникальный, используется для входа)
- `company_name` - название компании
- `contact_person` - контактное лицо
- `phone` - телефон
- `token` - токен для API (генерируется автоматически)
- `password` - пароль (зашифрован)
- `is_active` - активен ли аккаунт
- `date_joined` - дата регистрации
- `last_login` - последний вход

### Client (Клиент)
- `id` - уникальный идентификатор
- `email` - email (уникальный, используется для входа)
- `first_name` - имя
- `last_name` - фамилия
- `phone` - телефон (опционально)
- `token` - токен для API (генерируется автоматически)
- `password` - пароль (зашифрован)
- `is_active` - активен ли аккаунт
- `date_joined` - дата регистрации
- `last_login` - последний вход

Подробная документация по моделям: `MODELS_DOCUMENTATION.md`

## URL маршруты

### Веб-интерфейс
- `/` - главная страница с каталогом продуктов
- `/products/<id>/` - страница продукта
- `/auth/client/register/` - регистрация клиента
- `/auth/client/login/` - вход для клиента
- `/auth/seller/login/` - вход для продавца
- `/auth/logout/` - выход

### API
- `GET /api/products/` - список продуктов
- `GET /api/products/{id}/` - детали продукта
- `POST /api/products/` - создать продукт (только продавцы)
- `PUT/PATCH /api/products/{id}/` - обновить продукт
- `DELETE /api/products/{id}/` - удалить продукт
- `GET /api/products/my_products/` - мои продукты (продавцы)
- `GET /api/tags/` - список тегов
- `POST /api/auth/client/register/` - регистрация клиента через API
- `GET /api/auth/seller/profile/` - профиль продавца
- `GET /api/auth/client/profile/` - профиль клиента

Полная документация API: `API_DOCUMENTATION.md`

## Безопасность

- ✅ Пароли хранятся в зашифрованном виде (PBKDF2)
- ✅ Токен-аутентификация для API
- ✅ Валидация всех входных данных
- ✅ Права доступа на уровне представлений
- ✅ CSRF защита для веб-форм
- ✅ Защита от SQL-инъекций (ORM Django)

## Документация

- `API_DOCUMENTATION.md` - полная документация по API
- `MODELS_DOCUMENTATION.md` - подробная документация по моделям
- `SETTINGS_UPDATE.md` - инструкции по настройке Django
- `CHANGES_SUMMARY.md` - сводка всех изменений
- `UPDATES_SUMMARY.md` - сводка обновлений
- `QUICK_START.md` - быстрый старт
- `QUICK_GUIDE.md` - краткое руководство

## Особенности

### Регистрация продавцов
Продавцы регистрируются только через админ-панель Django (`/admin/`). Это обеспечивает контроль над продавцами и их продуктами.

### Модерация продуктов
Все продукты создаются с `checked=False` и не видны клиентам до проверки администратором. Только администратор может изменить поле `checked` через админ-панель.

### Цены и остатки
- Цена не может быть отрицательной
- Остаток не может быть отрицательным
- Оба поля обязательны при создании продукта

## Разработка

### Структура проекта
```
marketplace/
├── models.py          # Модели данных
├── serializers.py     # Сериализаторы для API
├── api_views.py       # API представления
├── views.py           # Веб-представления
├── auth_views.py      # Представления аутентификации
├── forms.py           # Django формы
├── authentication.py  # Кастомная аутентификация
├── permissions.py     # Права доступа
├── admin.py           # Настройки админ-панели
└── urls.py            # URL маршруты
```

## Лицензия

Проект создан для образовательных целей.
