{% extends "marketplace/base.html" %}

{% block title %}Корзина | BigMarket{% endblock %}

{% block content %}
<div class="mb-6">
  <h1 class="text-3xl font-semibold tracking-tight">Корзина</h1>
  <p class="text-sm text-slate-600">Заглушка для проверки сценария оформления заказа.</p>
</div>

<section class="grid gap-6 lg:grid-cols-[2fr,1fr]">
  <div class="space-y-4">
    {% for item in items %}
      <article class="flex flex-col gap-3 rounded-lg border border-slate-200 bg-white p-4 shadow-sm sm:flex-row sm:items-center sm:justify-between">
        <div class="flex items-center gap-4">
          <div class="h-16 w-16 rounded-md bg-slate-100 text-xs text-slate-500 shadow-inner flex items-center justify-center">Фото</div>
          <div class="space-y-1">
            <h3 class="text-base font-semibold leading-snug">{{ item.product.title }}</h3>
            <p class="text-sm text-slate-600">{{ item.product.category }}</p>
            <p class="text-xs text-slate-500">Наличие: {{ item.product.stock }} шт.</p>
          </div>
        </div>
        <div class="flex items-center gap-4 sm:w-52 sm:justify-end">
          <span class="text-sm text-slate-500">Количество</span>
          <span class="rounded-md border border-slate-200 px-3 py-1 text-sm font-semibold">{{ item.qty }}</span>
          <span class="text-lg font-semibold">{{ item.line_total }} ₽</span>
        </div>
      </article>
    {% empty %}
      <p class="text-sm text-slate-500">Корзина пустая.</p>
    {% endfor %}
  </div>

  <div class="space-y-4">
    <div class="rounded-lg border border-slate-200 bg-white p-4 shadow-sm">
      <h2 class="text-lg font-semibold">Итог</h2>
      <dl class="mt-3 space-y-2 text-sm">
        <div class="flex items-center justify-between">
          <dt class="text-slate-600">Товары</dt>
          <dd class="font-medium text-slate-800">{{ subtotal }} ₽</dd>
        </div>
        <div class="flex items-center justify-between">
          <dt class="text-slate-600">Доставка</dt>
          <dd class="font-medium text-slate-800">{{ shipping }} ₽</dd>
        </div>
        <div class="flex items-center justify-between border-t border-dashed border-slate-200 pt-2 text-base">
          <dt class="font-semibold text-slate-700">Итого</dt>
          <dd class="font-semibold text-slate-900">{{ total }} ₽</dd>
        </div>
      </dl>
      <button class="mt-4 w-full rounded-lg bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-700">Оформить заказ</button>
    </div>

    <div class="rounded-lg border border-slate-200 bg-white p-4 text-sm text-slate-600 shadow-sm">
      <p>Тут можно показать опции доставки, оплату или информеры. Данные — заглушки, адаптируйте под реальные модели.</p>
    </div>
  </div>
</section>
{% endblock %}
